function startScannerButton() {
    const readerDiv = document.getElementById("reader");
    if (!scannerActive) {
        readerDiv.style.display = "block"; // make camera div visible
        scannerActive = true;

        try {
            const html5QrcodeScanner = new Html5Qrcode("reader");
            html5QrcodeScanner.start(
                { facingMode: "environment" },
                { fps: 10, qrbox: 250 },
                (decodedText) => {
                    document.getElementById('vin').value = decodedText;
                    decodeAndSave(decodedText);
                    html5QrcodeScanner.stop().then(() => {
                        readerDiv.style.display = "none";
                        scannerActive = false;
                    });
                },
                (errorMessage) => {
                    console.log("Scan error:", errorMessage);
                }
            ).catch(err => {
                console.error("Camera start failed:", err);
                alert("Camera failed to start. Make sure you allowed camera access in Settings.");
                readerDiv.style.display = "none";
                scannerActive = false;
            });
        } catch (err) {
            console.error("Scanner initialization error:", err);
        }
    }
}
